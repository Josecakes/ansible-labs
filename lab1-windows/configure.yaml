---

# Step 2 - Configure the instance.  This is a simple
# example that just creates a user acct and installs IIS and management tools.
#  This playbook can be extended to do more detailed configuration.

- name: "Configure Instance"
  hosts: all
  gather_facts: true

  tasks:

    - name: "Ensure User Account Exists"
      user:
        name: "{{ siduser }}"
        password: wind0wsSidLabs!
        groups: Administrators

    - name: "Install IIS WebServer with sub-features and management tools"
      win_feature:
        name: Web-Server
        state: present
        include_sub_features: yes
        include_management_tools: yes
      register: win_feature

    - name: Reboot if installing Web-Server feature requires it
      win_reboot:
      when: win_feature.reboot_required

...
