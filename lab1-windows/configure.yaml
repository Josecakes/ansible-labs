---

# Step 2 - Configure the instance.  This is a simple
# example that just creates a user acct and installs IIS and management tools.
#  This playbook can be extended to do more detailed configuration.

- name: "Configure Instance"
  hosts: all
  gather_facts: true

  tasks:

    - name: "Ensure User Account Exists"
      win_user:
        name: "{{ siduser }}"
        password: "{{ windows_password }}"
        groups: Administrators

    - name: Install IIS Web-Server with sub features and management tools
      win_feature:
        name: web-server
        state: present
        include_sub_features: yes
        include_management_tools: yes
      register: win_feature
    
    - name: Reboot if installing Web-Server feature requires it
      win_reboot:
      when: win_feature.reboot_required

...
