---
- name: install nssm
  win_chocolatey:
    name: nssm
    state: present
    
- name: install nginx
  win_chocolatey:
    name: nginx
    version: '1.19.1'
    state: present

- name: copy nginx conf file
  win_template: 
    src: nginx.conf.j2
    dest: C:\tools\nginx-1.19.1\conf\nginx.conf

- name: Open site's port on firewall
  win_firewall_rule:
    name: demo_app_80
    enable: yes
    state: present
    localport: 80
    action: Allow
    direction: In
    protocol: Tcp
    force: true
  tags: firewall

#- name: "Confirm proper owner"
#  assert:
#    that:
#      - "tag_mysidlabs_owner == siduser"
#    fail_msg: "Host is not owned by {{ siduser }}"

# - name: Enable EPEL repository
#   become: true
#   yum:
#     name: epel-release
#     state: present
#     update_cache: yes

# - name: Install nginx
#   become: true
#   yum:
#     name: nginx
#     state: present
#     update_cache: yes

# - name: Build nginx Configuration
#   become: true
#   template:
#     src: nginx.conf
#     dest: /etc/nginx/nginx.conf

# - name: Restart nginx Service
#   become: true
#   service:
#     name: nginx
#     state: restarted
...